# 程序安装是怎么回事

我们知道，大部分软件都需要先安装才能使用，例如 QQ、360、迅雷等，要先从网上下载一个安装包，然后安装到计算机的C盘或者D盘等。大部分程序还会在开始菜单或者桌面上生成一个快捷方式，用户只要点击快捷方式，就可以启动软件。

那么，一个程序为什么要安装呢？下载后直接使用不可以吗？下面我们就来分析一下。

不同的操作系统，安装软件的方法虽然不一样，但基本原理是相同的，主要的思想就是将程序的二进制可执行文件拷贝到某个目录，设置一些路径。如果程序运行时需要一些库，将这些库拷贝到系统目录即可。

程序的安装基本上要经过下面四个步骤：

\1) 将程序的可执行文件从安装包所在的位置，拷贝到要安装的目录。

安装程序的时候，程序会给用户指定一个默认的安装目录，如果用户需要，也可以自定义安装，改变安装目录。一般所谓的“绿色软件”到此就安装结束了，可以使用了。

\2) 如果有必要，可以向系统目录拷贝一些动态链接库（DLL）。（可选操作）

有的程序，比如大型游戏，可能需要很多动态链接库（DLL）的支持，这时候程序可能会将这些 DLL 拷贝到系统库的默认目录，Win7 下一般拷贝到`C:\\Windows\System32\`（读者不妨打开该目录，会看到很多 DLL 文件）。

有些程序用到的 DLL 文件不是系统必需的，只能由程序自己使用，这样放在系统目录里就不太合适，安装的软件多了，就会造成系统臃肿，所以这些 DLL 会被拷贝到程序的安装目录。

\3) 向系统注册表中写入相应的设置项，注册程序或者库的安装信息。（可选操作）

安装前，用户可能会对软件做一些设置，安装时，这些设置就会被写入注册表。另外，当安装程序将 DLL 文件拷贝到系统目录时，一些 DLL 还需要向系统注册，告诉系统我在这里，不然使用的时候可能会找不到。

\4) 在开始菜单或者桌面上位程序创建快捷方式。（可选操作）

创建快捷方式主要是为了用户使用方便，有了快捷方式，就不用再到安装目录去启动程序了。

由此可见，程序在安装前后并没有什么区别，只不过是进行了一些设置，有的设置是程序运行所必须的，有的是为了让用户更加方便。