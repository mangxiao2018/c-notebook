# C语言逻辑运算符详解

现在假设有这样一种情况，我们的软件比较特殊，要求使用者必须成年，并且成绩大于等于60，该怎么办呢？

或许你会想到使用嵌套的 if 语句，类似下面这样的代码：

```c
#include <stdio.h>
int main()
{
    int age;
    float score;
    printf("请输入你的年龄和成绩：");
    scanf("%d %f", &age, &score);
    if(age >= 18){
        if(score >= 60){
            printf("你满足条件，欢迎使用该软件\n");
        }else{
            printf("抱歉，你的成绩不及格，不能使用该软件\n");
        }
    }else{
        printf("抱歉，你还未成年，不能使用该软件！\n");
    }
    return 0;
}
```

这种方法虽然能够行得通，但不够简洁和专业，我们可以将其压缩为一条 [if else 语句](http://c.biancheng.net/c/if_else/)：

```c
#include <stdio.h>
int main()
{
    int age;
    float score;
    printf("请输入你的年龄和成绩：");
    scanf("%d %f", &age, &score);
    if(age>=18 && score>=60){
        printf("你满足条件，欢迎使用该软件\n");
    }else{
        printf("抱歉，你还未成年，或者成绩不及格，不能使用该软件！\n");
    }
    return 0;
}
```

`&&`是一个新的运算符，称为逻辑运算符，表示`age>=18`和`score>=60`两个条件必须同时成立才能执行 if 后面的代码，否则就执行 else 后面的代码。

在高中数学中，我们就学过逻辑运算，例如p为真命题，q为假命题，那么“p且q”为假，“p或q”为真，“非q”为真。在C语言中，也有类似的逻辑运算：

| 运算符 | 说明                           | 结合性 | 举例                   |
| ------ | ------------------------------ | ------ | ---------------------- |
| &&     | 与运算，双目，对应数学中的“且” | 左结合 | 1&&0、(9>3)&&(b>a)     |
| \|\|   | 或运算，双目，对应数学中的“或” | 左结合 | 1\|\|0、(9>3)\|\|(b>a) |
| !      | 非运算，单目，对应数学中的“非” | 右结合 | !a、!(2<5)             |

## 逻辑运算的结果

在编程中，我们一般将零值称为“假”，将非零值称为“真”。逻辑运算的结果也只有“真”和“假”，“真”对应的值为 1，“假”对应的值为 0。

#### 1) 与运算(&&)

参与运算的两个表达式都为真时，结果才为真，否则为假。例如：

5&&0

5为真，0为假，相与的结果为假，也就是 0。

(5>0) && (4>2)

5>0 的结果是1，为真，4>2结果是1，也为真，所以相与的结果为真，也就是1。

#### 2) 或运算(||)

参与运算的两个表达式只要有一个为真，结果就为真；两个表达式都为假时结果才为假。例如：

10 || 0

10为真，0为假，相或的结果为真，也就是 1。

(5>0) || (5>8)

5>0 的结果是1，为真，5>8 的结果是0，为假，所以相或的结果为真，也就是1。

#### 3) 非运算(!)

参与运算的表达式为真时，结果为假；参与运算的表达式为假时，结果为真。例如：

!0

0 为假，非运算的结果为真，也就是 1。

!(5>0)

5>0 的结果是1，为真，非运算的结果为假，也就是 0。

输出逻辑运算的结果：

```c
#include <stdio.h>
int main(){
    int a = 0, b = 10, c = -6;
    int result_1 = a&&b, result_2 = c||0;
    printf("%d, %d\n", result_1, !c);
    printf("%d, %d\n", 9&&0, result_2);
    printf("%d, %d\n", b||100, 0&&0);
    return 0;
}
```

运行结果：
0, 0
0, 1
1, 0

## 优先级

逻辑运算符和其它运算符优先级从低到高依次为：

赋值运算符(=) < &&和|| < 关系运算符 < 算术运算符 < 非(!)

&& 和 || 低于关系运算符，! 高于算术运算符。
 
按照运算符的优先顺序可以得出：

- a>b && c>d  等价于  (a>b)&&(c>d)
- !b==c||d<a  等价于  ((!b)==c)||(d<a)
- a+b>c&&x+y<b  等价于  ((a+b)>c)&&((x+y)<b)


另外，逻辑表达式也可以嵌套使用，例如`a>b && b || 9>c`，`a || c>d &&  !p`。

逻辑运算符举例：

```c
#include <stdio.h>
int main(){
    char c='k';
    int i=1,j=2,k=3;
    float x=3e+5,y=0.85;
    printf( "%d,%d\n", !x*!y, !!!x );
    printf( "%d,%d\n", x||i&&j-3, i<j&&x<y );
    printf( "%d,%d\n", i==5&&c&&(j=8), x+y||i+j+k );
    return 0;
}
```

运行结果：
0,0
1,0
0,1

本例中!x和!y分别为0，!x*!y也为0，故其输出值为0。由于x为非0，故!!!x的逻辑值为0。对x|| i && j-3式，先计算j-3的值为非0，再求i && j-3的逻辑值为1，故x||i&&j-3的逻辑值为 1。对i<j&&x<y式，由于i<j的值为1，而x<y为0故表达式的值为1，0相与，最后为0，对i==5&&c&&(j=8)式，由于i==5为假，即值为0，该表达式由两个与运算组成，所以整个表达式的值为0。对于式x+ y||i+j+k由于x+y的值为非0，故整个或表达式的值为1。